$('#ajax-modal').html('<%= escape_javascript(render :template => "testcase_steps/upload_form.html.erb") %>');
showModal('ajax-modal', '800px');

// (function () {
//     // detach input skeleton from the form avoiding posting it
//     inputSkeleton = $("#cbp_image_field");
//     if (inputSkeleton)
//       inputSkeleton.detach();

//     // since our form is hooked to all Redmine's pages, detach it always,
//     // if it is needed on the page, we will attach it below
//     var imageForm = $("#cbp_images_form");
//     if (imageForm)
//       imageForm.detach();
//     else
//       return;

//     // move image attachment block to proper place
//     var addFile;
//     var attachFields = $("#attachments_fields");

//     if (attachFields && attachFields.length > 0) {
//       // Redmine <= 3.3
//       addFile = attachFields.next("span.add_attachment");
//     }
//     else {
//       // Redmine >= 3.4
//       addFile = $(".attachments_form");
//     }

//     if (!addFile || addFile.length == 0)
//       return;

//     addFile.after(imageForm);
// })();